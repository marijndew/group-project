<!DOCTYPE html>
<html>

<head>
  <style>
    #map {
        height: 100%;
        width: 100%;
      }
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    .logo {
      position: absolute;
      top: 1%;
      left: 2%;
      z-index: 5;
    }
    .floating-panel-nav{
      position: absolute;
      top: 5%;
      left: 10%;
      right: 10%;
      z-index: 4;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 1%;
      border: 1% solid rgb(233, 231, 231);
      border-radius: 7px;
      text-align: center;
      font-family: 'Roboto','sans-serif';
      line-height: 2%;
      padding-left: 10px;
      margin-left: -52px;
    }
    .floating-panel-left-top {
      position: absolute;
      top: 25%;
      left: 5%;
      z-index: 5;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 1%;
      border: 1px solid rgb(233, 231, 231);
      border-radius: 7px;
      text-align: center;
      font-family: 'Roboto','sans-serif';
      font-size: 1vw;
      line-height: 3vh;
      margin-left: -4%;
    }
    .footer{
      position: absolute;
      bottom: 0%;
      left: 0%;
      right: 0%;
      z-index: 4;
      background-color: rgba(255, 255, 255, 0.3);
      text-align: center;
      font-family: 'Roboto','sans-serif';
      font-weight: bold;
      font-size: 1vw;
      color: black;
      line-height: 1vw;
    }
    .fullscreen-button {
      position: absolute;
      bottom: 2%;
      left: 85%;
      right: 0%;
      z-index: 5;
    }
    </style>
</head>

<body>
  <div id="map"></div>
  <div id="places" style="display:none">
    <%=places%>
  </div>
  <div class="logo"><img src="public/images/logo.png" height="152" width="125"></div>
  <div class="floating-panel-left-top">
    <p> <b>Statistics</b>
      <hr><img src="public/images/statistics/world.png">Countries Visited: <b>0</b><br>KM travelled: <b>0</b><br>more more more!<br></p>
  </div>
  <div class="floating-panel-nav">
    <p>This is a <b>sample menu</b><br></p>
  </div>
  <input class="fullscreen-button" type="button" value="Toggle Fullscreen" onclick="toggleFullScreen()">
  <div class="footer">
    <p>Â© Wanderlust 2019</b></p>
  </div>
</body>

<script>
  let coords = document.getElementById("places").innerHTML;
  let parts = coords.split(",");

  let finalResult = []
  while (parts.length) {
    let newArr = parts.splice(0, 3);
    finalResult.push(newArr);
  };

  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 3,
      maxZoom: 12,
      minZoom: 3,
      center: {
        lat: 47.522278,
        lng: 21.077278
      },
      disableDefaultUI: true,
      styles: [{
          "elementType": "geometry",
          "stylers": [{
            "color": "#ebe3cd"
          }]
        },
        {
          "featureType": "administrative",
          "elementType": "geometry.stroke",
          "stylers": [{
            "color": "#c9b2a6"
          }]
        },
        {
          "featureType": "administrative.country",
          "elementType": "geometry.fill",
          "stylers": [{
            "visibility": "on"
          }]
        },
        {
          "featureType": "administrative.country",
          "elementType": "geometry.stroke",
          "stylers": [{
              "color": "#525252"
            },
            {
              "weight": 0.5
            }
          ]
        },
        {
          "featureType": "administrative.country",
          "elementType": "labels.text",
          "stylers": [{
            "color": "#ffffff"
          }]
        },
        {
          "featureType": "administrative.country",
          "elementType": "labels.text.stroke",
          "stylers": [{
              "color": "#000000"
            },
            {
              "weight": 0.5
            }
          ]
        },
        {
          "featureType": "administrative.land_parcel",
          "elementType": "geometry.stroke",
          "stylers": [{
            "color": "#ffff00"
          }]
        },
        {
          "featureType": "administrative.land_parcel",
          "elementType": "labels.text.fill",
          "stylers": [{
            "color": "#ae9e90"
          }]
        },
        {
          "featureType": "administrative.locality",
          "elementType": "geometry.stroke",
          "stylers": [{
            "weight": 6.5
          }]
        },
        {
          "featureType": "administrative.locality",
          "elementType": "labels.text.fill",
          "stylers": [{
            "color": "#ffffff"
          }]
        },
        {
          "featureType": "administrative.locality",
          "elementType": "labels.text.stroke",
          "stylers": [{
              "color": "#000000"
            },
            {
              "weight": 0.5
            }
          ]
        },
        {
          "featureType": "administrative.province",
          "elementType": "geometry.stroke",
          "stylers": [{
              "color": "#848484"
            },
            {
              "weight": 0.5
            }
          ]
        },
        {
          "featureType": "landscape.man_made",
          "elementType": "geometry.fill",
          "stylers": [{
            "color": "#fcfcf7"
          }]
        },
        {
          "featureType": "landscape.natural",
          "elementType": "geometry",
          "stylers": [{
            "color": "#dfd2ae"
          }]
        },
        {
          "featureType": "landscape.natural",
          "elementType": "geometry.fill",
          "stylers": [{
            "color": "#c9e9be"
          }]
        },
        {
          "featureType": "landscape.natural.terrain",
          "elementType": "geometry.fill",
          "stylers": [{
            "color": "#e7cbb6"
          }]
        },
        {
          "featureType": "poi",
          "elementType": "geometry",
          "stylers": [{
            "color": "#dfd2ae"
          }]
        },
        {
          "featureType": "poi",
          "elementType": "labels.text.fill",
          "stylers": [{
            "color": "#93817c"
          }]
        },
        {
          "featureType": "poi.attraction",
          "stylers": [{
            "visibility": "off"
          }]
        },
        {
          "featureType": "poi.attraction",
          "elementType": "geometry.fill",
          "stylers": [{
              "color": "#f4f4ff"
            },
            {
              "visibility": "on"
            }
          ]
        },
        {
          "featureType": "poi.park",
          "elementType": "geometry.fill",
          "stylers": [{
            "color": "#eaf7e8"
          }]
        },
        {
          "featureType": "road",
          "elementType": "geometry",
          "stylers": [{
            "color": "#f5f1e6"
          }]
        },
        {
          "featureType": "road",
          "elementType": "geometry.fill",
          "stylers": [{
            "color": "#fcfcf7"
          }]
        },
        {
          "featureType": "road.arterial",
          "stylers": [{
            "visibility": "off"
          }]
        },
        {
          "featureType": "road.highway",
          "stylers": [{
              "color": "#fcfcf7"
            },
            {
              "visibility": "simplified"
            }
          ]
        },
        {
          "featureType": "road.highway",
          "elementType": "geometry",
          "stylers": [{
            "weight": 0.5
          }]
        },
        {
          "featureType": "road.highway",
          "elementType": "geometry.stroke",
          "stylers": [{
            "color": "#e9bc62"
          }]
        },
        {
          "featureType": "road.highway",
          "elementType": "labels",
          "stylers": [{
            "visibility": "off"
          }]
        },
        {
          "featureType": "road.highway.controlled_access",
          "stylers": [{
            "visibility": "off"
          }]
        },
        {
          "featureType": "road.local",
          "stylers": [{
            "visibility": "off"
          }]
        },
        {
          "featureType": "transit.station",
          "stylers": [{
            "visibility": "off"
          }]
        },
        {
          "featureType": "transit.station",
          "elementType": "geometry",
          "stylers": [{
            "color": "#dfd2ae"
          }]
        },
        {
          "featureType": "water",
          "elementType": "geometry.fill",
          "stylers": [{
            "color": "#d1e7f0"
          }]
        },
        {
          "featureType": "water",
          "elementType": "labels.text.fill",
          "stylers": [{
            "color": "#92998d"
          }]
        }
      ]
    });
    setMarkers(map);
  }

        let markers;

        function setMarkers(map) {
            var markerCluster = new MarkerClusterer(map, [], {
            imagePath: 'public/images/cluster/p'
        });

    finalResult.forEach((place) => {

      var image = {
        url: place[0],
        scaledSize: new google.maps.Size(64, 64),
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(32, 32)
      };

      var shape = {
        coords: [1, 1, 1, 20, 18, 20, 18, 1],
        type: 'poly'
      };

      var myLatlng = new google.maps.LatLng(place[1], place[2]);

                var marker = new google.maps.Marker({
                    position: myLatlng,
                    map: map,
                    icon: image,
                    shape: shape,
                    animation: google.maps.Animation.DROP
                });
            markerCluster.addMarker(marker);
            })
        }

        function toggleBounce() {
  if (marker.getAnimation() !== null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
}

    </script>
    <script src="public/js/markerclusterer.js"></script>
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key==initMap">
    </script>
     
      <script>
            function toggleFullScreen() {
                if ((document.fullScreenElement && document.fullScreenElement !== null) ||    
                 (!document.mozFullScreen && !document.webkitIsFullScreen)) {
                  if (document.documentElement.requestFullScreen) {  
                    document.documentElement.requestFullScreen();  
                  } else if (document.documentElement.mozRequestFullScreen) {  
                    document.documentElement.mozRequestFullScreen();  
                  } else if (document.documentElement.webkitRequestFullScreen) {  
                    document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);  
                  }  
                } else {  
                  if (document.cancelFullScreen) {  
                    document.cancelFullScreen();  
                  } else if (document.mozCancelFullScreen) {  
                    document.mozCancelFullScreen();  
                  } else if (document.webkitCancelFullScreen) {  
                    document.webkitCancelFullScreen();  
                  }  
                }  
              }
    </script>
</html>
