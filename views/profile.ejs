<html>

<head>
    <style>
        #map {
        height: 100%;
        width: 100%;
      }
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    .logo {
      position: absolute;
      top: 1%;
      left: 2%;
      z-index: 5;
    }
    .floating-panel-nav{
      position: absolute;
      top: 5%;
      left: 10%;
      right: 10%;
      z-index: 4;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 1%;
      border: 1% solid rgb(233, 231, 231);
      border-radius: 7px;
      text-align: center;
      font-family: 'Roboto','sans-serif';
      line-height: 2%;
      padding-left: 10px;
      margin-left: -52px;
    }
    .floating-panel-left-top {
      position: absolute;
      top: 25%;
      left: 5%;
      z-index: 5;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 1%;
      border: 1px solid rgb(233, 231, 231);
      border-radius: 7px;
      text-align: center;
      font-family: 'Roboto','sans-serif';
      font-size: 1vw;
      line-height: 3vh;
      margin-left: -4%;
    }
    .footer{
      position: absolute;
      bottom: 0%;
      left: 0%;
      right: 0%;
      z-index: 4;
      background-color: rgba(255, 255, 255, 0.3);
      text-align: center;
      font-family: 'Roboto','sans-serif';
      font-weight: bold;
      font-size: 1vw;
      color: black;
      line-height: 1vw;
    }
    .fullscreen-button {
      position: absolute;
      bottom: 2%;
      left: 85%;
      right: 0%;
      z-index: 5;
    }
    </style>
</head>

<body>
    <div id="map"></div>
    <div id="places" style="display:none">
        <%=places%>
    </div>
    <div class="logo"><img src="public/images/logo.png" height="152" width="125"></div>
    <div class="floating-panel-left-top">
        <p> <b>Statistics</b>
            <hr><img src="public/images/statistics/world.png">Countries Visited: <b>0</b><br>KM travelled: <b>0</b><br>more more more!<br></p>
    </div>
    <div class="floating-panel-nav">
        <p>This is a <b>sample menu</b><br></p>
    </div>
    <input class="fullscreen-button" type="button" value="Toggle Fullscreen" onclick="toggleFullScreen()">
    <div class="footer">
        <p><b>Â© Wanderlust 2019</b></p>
    </div>
</body>

<script>
    let coords = document.getElementById("places").innerHTML;
    let parts = coords.split(",");
    let finalResult = []
    while (parts.length) {
        let newArr = parts.splice(0, 3);
        finalResult.push(newArr);
    }
    console.log(finalResult)

    function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 3,
            maxZoom: 12,
            minZoom: 3,
            center: {
                lat: 47.522278,
                lng: 21.077278
            },
            disableDefaultUI: true
        });
        setMarkers(map);
    }
    let markers = ""

    function setMarkers(map) {
        var markerCluster = new MarkerClusterer(map, [], {
            imagePath: 'images/p'
        });
        finalResult.forEach((place) => {
            var image = {
                url: place[0],
                scaledSize: new google.maps.Size(64, 64),
                origin: new google.maps.Point(0, 0),
                anchor: new google.maps.Point(32, 32)
            };
            var shape = {
                coords: [1, 1, 1, 20, 18, 20, 18, 1],
                type: 'poly'
            };
            var myLatlng = new google.maps.LatLng(place[1], place[2]);
            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                icon: image,
                shape: shape
            });
            markerCluster.addMarker(marker);
        })
    }

</script>
<script src="public/js/markerclusterer.js"></script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap">
</script>

<script>
    function toggleFullScreen() {
        if ((document.fullScreenElement && document.fullScreenElement !== null) ||
            (!document.mozFullScreen && !document.webkitIsFullScreen)) {
            if (document.documentElement.requestFullScreen) {
                document.documentElement.requestFullScreen();
            } else if (document.documentElement.mozRequestFullScreen) {
                document.documentElement.mozRequestFullScreen();
            } else if (document.documentElement.webkitRequestFullScreen) {
                document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
            }
        } else {
            if (document.cancelFullScreen) {
                document.cancelFullScreen();
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            } else if (document.webkitCancelFullScreen) {
                document.webkitCancelFullScreen();
            }
        }
    }

</script>

</html>
